---
import RestartGameModal from "../components/modals/RestartGameModal.astro";
import SaveGameModal from "./modals/SaveGameModal.astro";

const { title } = Astro.props;
---
<div class="navigation">
    <nav>
        <ul>
            <li><p class="resume"> RESUME </p></li>
            <li><p class="save"> SAVE GAME </p></li>
            <li><p class="restart"> RESTART </p></li>
            <li><p class="quit"> QUIT </p></li>
        </ul>
    </nav>
</div>
<div id="top-menu-bar" class="top-menu-bar">
    <div id="menu-icon" class="menu-icon">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
    </div>
    <p id="top-menu-title" class="top-menu-title">{title}</p>
</div>
<RestartGameModal></RestartGameModal>
<SaveGameModal></SaveGameModal>
<script>
    import { gameMenu, showDrawer, closeDrawer, showNextMenu } from "../scripts/game-navmenu.js";

    document.getElementById("menu-icon").addEventListener("click", showDrawer);
    document.querySelector(".resume").parentNode.addEventListener("click", closeDrawer);

    // quit -> go to lobby
    gameMenu.querySelector(".quit").parentNode.addEventListener("click", () => {
        window.location.href = "/lobby/";
    });

    // show restart modal
    gameMenu.querySelector(".restart").parentElement.addEventListener("click", () => {
        showNextMenu("#restart-game-modal");
    });

    gameMenu.querySelector(".save").parentElement.addEventListener("click", () => {
        showNextMenu("#save-game-modal");
    });
</script>